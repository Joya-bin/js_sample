!function(window){"use strict";function loopKeys(expr){var b0=brackets(0),els=expr.slice(b0.length).match(/^\s*(\S+?)\s*(?:,\s*(\S+))?\s+in\s+(.+)$/);return els?{key:els[1],pos:els[2],val:b0+els[3]}:{val:expr}}function mkitem(expr,key,val){var item={};return item[expr.key]=key,expr.pos&&(item[expr.pos]=val),item}function _each(dom,parent,expr){remAttr(dom,"each");var checksum,template=dom.outerHTML,root=dom.parentNode,placeholder=document.createComment("riot placeholder"),tags=[],child=getTag(dom);root.insertBefore(placeholder,dom),expr=loopKeys(expr),parent.one("premount",function(){root.stub&&(root=parent.root),dom.parentNode.removeChild(dom)}).on("update",function(){var test,items=tmpl(expr.val,parent);isArray(items)||(checksum=items?JSON.stringify(items):"",items=items?Object.keys(items).map(function(key){return mkitem(expr,key,items[key])}):[]);for(var frag=document.createDocumentFragment(),i=tags.length,j=items.length;i>j;)tags[--i].unmount();for(tags.length=j,test=!checksum&&!!expr.key,i=0;j>i;++i){var _item=test?mkitem(expr,items[i],i):items[i];tags[i]?tags[i].update(_item):((tags[i]=new Tag({tmpl:template},{parent:parent,isLoop:!0,root:root,item:_item})).mount(),frag.appendChild(tags[i].root)),tags[i]._item=_item}root.insertBefore(frag,placeholder),child&&(parent.tags[getTagName(dom)]=tags)}).one("updated",function(){var keys=Object.keys(parent);walk(root,function(node){1!=node.nodeType||node.isLoop||node._looped||(node._visited=!1,node._looped=!0,setNamed(node,parent,keys))})})}function parseNamedElements(root,parent,childTags){walk(root,function(dom){if(1==dom.nodeType){dom.isLoop=dom.parentNode&&dom.parentNode.isLoop||dom.getAttribute("each")?1:0;var child=getTag(dom);if(child&&!dom.isLoop){for(var cachedTag,tag=new Tag(child,{root:dom,parent:parent},dom.innerHTML),tagName=getTagName(dom),ptag=parent;!getTag(ptag.root)&&ptag.parent;)ptag=ptag.parent;tag.parent=ptag,cachedTag=ptag.tags[tagName],cachedTag?(isArray(cachedTag)||(ptag.tags[tagName]=[cachedTag]),ptag.tags[tagName].push(tag)):ptag.tags[tagName]=tag,dom.innerHTML="",childTags.push(tag)}dom.isLoop||setNamed(dom,parent,[])}})}function parseExpressions(root,tag,expressions){function addExpr(dom,val,extra){if(val.indexOf(brackets(0))>=0){var expr={dom:dom,expr:val};expressions.push(extend(expr,extra))}}walk(root,function(dom){var type=dom.nodeType;if(3==type&&"STYLE"!=dom.parentNode.tagName&&addExpr(dom,dom.nodeValue),1==type){var attr=dom.getAttribute("each");return attr?(_each(dom,tag,attr),!1):(each(dom.attributes,function(attr){var name=attr.name,bool=name.split("__")[1];return addExpr(dom,attr.value,{attr:bool||name,bool:bool}),bool?(remAttr(dom,name),!1):void 0}),getTag(dom)?!1:void 0)}})}function Tag(impl,conf,innerHTML){function updateOpts(){each(root.attributes,function(el){opts[el.name]=tmpl(el.value,parent||self)}),each(Object.keys(attr),function(name){opts[name]=tmpl(attr[name],parent||self)})}function normalizeData(data){for(var key in item)"undefined"!=typeof self[key]&&(self[key]=data[key])}function inheritFromParent(){self.parent&&isLoop&&each(Object.keys(self.parent),function(k){var mustSync=~propsInSyncWithParent.indexOf(k);("undefined"==typeof self[k]||mustSync)&&(mustSync||propsInSyncWithParent.push(k),self[k]=self.parent[k])})}function toggle(isMount){if(each(childTags,function(child){child[isMount?"mount":"unmount"]()}),parent){var evt=isMount?"on":"off";isLoop?parent[evt]("unmount",self.unmount):parent[evt]("update",self.update)[evt]("unmount",self.unmount)}}var loopDom,self=riot.observable(this),opts=inherit(conf.opts)||{},dom=mkdom(impl.tmpl),parent=conf.parent,isLoop=conf.isLoop,item=conf.item,expressions=[],childTags=[],root=conf.root,fn=impl.fn,tagName=root.tagName.toLowerCase(),attr={},propsInSyncWithParent=[],TAG_ATTRIBUTES=/([\w\-]+)\s?=\s?['"]([^'"]+)["']/gim;if(fn&&root._tag&&root._tag.unmount(!0),this.isMounted=!1,impl.attrs){var attrs=impl.attrs.match(TAG_ATTRIBUTES);each(attrs,function(a){var kv=a.split(/\s?=\s?/);root.setAttribute(kv[0],kv[1].replace(/['"]/g,""))})}root._tag=this,this._id=fastAbs(~~((new Date).getTime()*Math.random())),extend(this,{parent:parent,root:root,opts:opts,tags:{}},item),each(root.attributes,function(el){var val=el.value;brackets(/\{.*\}/).test(val)&&(attr[el.name]=val)}),dom.innerHTML&&!/select|select|optgroup|tbody|tr/.test(tagName)&&(dom.innerHTML=replaceYield(dom.innerHTML,innerHTML)),this.update=function(data){inheritFromParent(),item&&JSON.stringify(item)!=JSON.stringify(data)&&(normalizeData(data),item=data),extend(self,data),updateOpts(),self.trigger("update",data),update(expressions,self,data),self.trigger("updated")},this.mixin=function(){each(arguments,function(mix){mix="string"==typeof mix?riot.mixin(mix):mix,each(Object.keys(mix),function(key){"init"!=key&&(self[key]="function"==typeof mix[key]?mix[key].bind(self):mix[key])}),mix.init&&mix.init.bind(self)()})},this.mount=function(){if(updateOpts(),fn&&fn.call(self,opts),toggle(!0),parseExpressions(dom,self,expressions),(!self.parent||isLoop)&&self.update(item),self.trigger("premount"),isLoop)self.root=root=loopDom=dom.firstChild;else{for(;dom.firstChild;)root.appendChild(dom.firstChild);root.stub&&(self.root=root=parent.root)}!self.parent||self.parent.isMounted?(self.isMounted=!0,self.trigger("mount")):self.parent.one("mount",function(){isInStub(self.root)||(self.parent.isMounted=self.isMounted=!0,self.trigger("mount"))})},this.unmount=function(keepRootTag){var el=loopDom||root,p=el.parentNode;if(p){if(parent)isArray(parent.tags[tagName])?each(parent.tags[tagName],function(tag,i){tag._id==self._id&&parent.tags[tagName].splice(i,1)}):parent.tags[tagName]=void 0;else for(;el.firstChild;)el.removeChild(el.firstChild);keepRootTag||p.removeChild(el)}self.trigger("unmount"),toggle(),self.off("*"),root._tag=null},parseNamedElements(dom,this,childTags)}function setEventHandler(name,handler,dom,tag,item){dom[name]=function(e){e=e||window.event;try{e.which||(e.which=e.charCode||e.keyCode),e.target||(e.target=e.srcElement),e.currentTarget=dom}catch(ignored){}if(e.item=tag._item?tag._item:item,handler.call(tag,e)===!0||/radio|check/.test(dom.type)||(e.preventDefault&&e.preventDefault(),e.returnValue=!1),!e.preventUpdate){var el=item?tag.parent:tag;el.update()}}}function insertTo(root,node,before){root&&(root.insertBefore(before,node),root.removeChild(node))}function update(expressions,tag,item){each(expressions,function(expr,i){var dom=expr.dom,attrName=expr.attr,value=tmpl(expr.expr,tag),parent=expr.dom.parentNode;if(null==value&&(value=""),parent&&"TEXTAREA"==parent.tagName&&(value=value.replace(/riot-/g,"")),expr.value!==value){if(expr.value=value,!attrName)return dom.nodeValue=value.toString();if(remAttr(dom,attrName),"function"==typeof value)setEventHandler(attrName,value,dom,tag,item);else if("if"==attrName){var stub=expr.stub;value?stub&&(insertTo(stub.parentNode,stub,dom),dom.inStub=!1,isInStub(dom)||walk(dom,function(el){el._tag&&!el._tag.isMounted&&(el._tag.isMounted=!!el._tag.trigger("mount"))})):(stub=expr.stub=stub||document.createTextNode(""),insertTo(dom.parentNode,dom,stub),dom.inStub=!0)}else if(/^(show|hide)$/.test(attrName))"hide"==attrName&&(value=!value),dom.style.display=value?"":"none";else if("value"==attrName)dom.value=value;else if("riot-"==attrName.slice(0,5)&&"riot-tag"!=attrName)attrName=attrName.slice(5),value?dom.setAttribute(attrName,value):remAttr(dom,attrName);else{if(expr.bool){if(dom[attrName]=value,!value)return;value=attrName}"object"!=typeof value&&dom.setAttribute(attrName,value)}}})}function each(els,fn){for(var el,i=0,len=(els||[]).length;len>i;i++)el=els[i],null!=el&&fn(el,i)===!1&&i--;return els}function isFunction(v){return"function"==typeof v||!1}function remAttr(dom,name){dom.removeAttribute(name)}function fastAbs(nr){return(nr^nr>>31)-(nr>>31)}function getTagName(dom){var child=getTag(dom),namedTag=dom.getAttribute("name"),tagName=namedTag&&namedTag.indexOf(brackets(0))<0?namedTag:child.name;return tagName}function extend(src){for(var obj,args=arguments,i=1;i<args.length;++i)if(obj=args[i])for(var key in obj)src[key]=obj[key];return src}function mkdom(template){var checkie=ieVersion&&10>ieVersion,matches=/^\s*<([\w-]+)/.exec(template),tagName=matches?matches[1].toLowerCase():"",rootTag="th"===tagName||"td"===tagName?"tr":"tr"===tagName?"tbody":"div",el=mkEl(rootTag);return el.stub=!0,checkie&&("optgroup"===tagName?optgroupInnerHTML(el,template):"option"===tagName?optionInnerHTML(el,template):"div"!==rootTag?tbodyInnerHTML(el,template,tagName):checkie=0),checkie||(el.innerHTML=template),el}function walk(dom,fn){if(dom)if(fn(dom)===!1)walk(dom.nextSibling,fn);else for(dom=dom.firstChild;dom;)walk(dom,fn),dom=dom.nextSibling}function isInStub(dom){for(;dom;){if(dom.inStub)return!0;dom=dom.parentNode}return!1}function mkEl(name){return document.createElement(name)}function replaceYield(tmpl,innerHTML){return tmpl.replace(/<(yield)\/?>(<\/\1>)?/gim,innerHTML||"")}function $$(selector,ctx){return(ctx||document).querySelectorAll(selector)}function inherit(parent){function Child(){}return Child.prototype=parent,new Child}function setNamed(dom,parent,keys){each(dom.attributes,function(attr){if(!dom._visited&&("id"===attr.name||"name"===attr.name)){dom._visited=!0;var p,v=attr.value;if(~keys.indexOf(v))return;p=parent[v],p?isArray(p)?p.push(dom):parent[v]=[p,dom]:parent[v]=dom}})}function tbodyInnerHTML(el,html,tagName){var child,div=mkEl("div"),loops=/td|th/.test(tagName)?3:2;for(div.innerHTML="<table>"+html+"</table>",child=div.firstChild;loops--;)child=child.firstChild;el.appendChild(child)}function optionInnerHTML(el,html){var opt=mkEl("option"),valRegx=/value=[\"'](.+?)[\"']/,selRegx=/selected=[\"'](.+?)[\"']/,eachRegx=/each=[\"'](.+?)[\"']/,ifRegx=/if=[\"'](.+?)[\"']/,innerRegx=/>([^<]*)</,valuesMatch=html.match(valRegx),selectedMatch=html.match(selRegx),innerValue=html.match(innerRegx),eachMatch=html.match(eachRegx),ifMatch=html.match(ifRegx);opt.innerHTML=innerValue?innerValue[1]:html,valuesMatch&&(opt.value=valuesMatch[1]),selectedMatch&&opt.setAttribute("riot-selected",selectedMatch[1]),eachMatch&&opt.setAttribute("each",eachMatch[1]),ifMatch&&opt.setAttribute("if",ifMatch[1]),el.appendChild(opt)}function optgroupInnerHTML(el,html){var opt=mkEl("optgroup"),labelRegx=/label=[\"'](.+?)[\"']/,elementRegx=/^<([^>]*)>/,tagRegx=/^<([^ \>]*)/,labelMatch=html.match(labelRegx),elementMatch=html.match(elementRegx),tagMatch=html.match(tagRegx),innerContent=html;if(elementMatch){var options=html.slice(elementMatch[1].length+2,-tagMatch[1].length-3).trim();innerContent=options}if(labelMatch&&opt.setAttribute("riot-label",labelMatch[1]),innerContent){var innerOpt=mkEl("div");optionInnerHTML(innerOpt,innerContent),opt.appendChild(innerOpt.firstChild)}el.appendChild(opt)}function getTag(dom){return tagImpl[dom.getAttribute(RIOT_TAG)||dom.tagName.toLowerCase()]}function injectStyle(css){if(styleNode=styleNode||mkEl("style"),document.head){if(styleNode.styleSheet?styleNode.styleSheet.cssText+=css:styleNode.innerHTML+=css,!styleNode._rendered)if(styleNode.styleSheet)document.body.appendChild(styleNode);else{var rs=$$("style[type=riot]")[0];rs?(rs.parentNode.insertBefore(styleNode,rs),rs.parentNode.removeChild(rs)):document.head.appendChild(styleNode)}styleNode._rendered=!0}}function mountTo(root,tagName,opts){var tag=tagImpl[tagName],innerHTML=root._innerHTML=root._innerHTML||root.innerHTML;return root.innerHTML="",tag&&root&&(tag=new Tag(tag,{root:root,opts:opts},innerHTML)),tag&&tag.mount?(tag.mount(),virtualDom.push(tag),tag.on("unmount",function(){virtualDom.splice(virtualDom.indexOf(tag),1)})):void 0}var riot={version:"v2.2.2-beta",settings:{}},T_STRING="string",T_OBJECT="object",isArray=Array.isArray||function(){var _ts=Object.prototype.toString;return function(v){return"[object Array]"===_ts.call(v)}}(),ieVersion=function(win){return 0|(win&&win.document||{}).documentMode}(window);riot.observable=function(el){el=el||{};var callbacks={},_id=0;return el.on=function(events,fn){return isFunction(fn)&&(fn._id="undefined"==typeof fn._id?_id++:fn._id,events.replace(/\S+/g,function(name,pos){(callbacks[name]=callbacks[name]||[]).push(fn),fn.typed=pos>0})),el},el.off=function(events,fn){return"*"==events?callbacks={}:events.replace(/\S+/g,function(name){if(fn)for(var cb,arr=callbacks[name],i=0;cb=arr&&arr[i];++i)cb._id==fn._id&&(arr.splice(i,1),i--);else callbacks[name]=[]}),el},el.one=function(name,fn){function on(){el.off(name,on),fn.apply(el,arguments)}return el.on(name,on)},el.trigger=function(name){for(var fn,args=[].slice.call(arguments,1),fns=callbacks[name]||[],i=0;fn=fns[i];++i)fn.busy||(fn.busy=1,fn.apply(el,fn.typed?[name].concat(args):args),fns[i]!==fn&&i--,fn.busy=0);return callbacks.all&&"all"!=name&&el.trigger.apply(el,["all",name].concat(args)),el},el},riot.mixin=function(){var mixins={};return function(name,mixin){return mixin?void(mixins[name]=mixin):mixins[name]}}(),function(riot,evt,window){function hash(){return loc.href.split("#")[1]||""}function parser(path){return path.split("/")}function emit(path){path.type&&(path=hash()),path!=current&&(fns.trigger.apply(null,["H"].concat(parser(path))),current=path)}if(window){var current,loc=window.location,fns=riot.observable(),win=window,started=!1,r=riot.route=function(arg){arg[0]?(loc.hash=arg,emit(arg)):fns.on("H",arg)};r.exec=function(fn){fn.apply(null,parser(hash()))},r.parser=function(fn){parser=fn},r.stop=function(){started&&(win.removeEventListener?win.removeEventListener(evt,emit,!1):win.detachEvent("on"+evt,emit),fns.off("*"),started=!1)},r.start=function(){started||(win.addEventListener?win.addEventListener(evt,emit,!1):win.attachEvent("on"+evt,emit),started=!0)},r.start()}}(riot,"hashchange",window);var styleNode,brackets=function(orig){var cachedBrackets,r,b,re=/[{}]/g;return function(x){var s=riot.settings.brackets||orig;return cachedBrackets!==s&&(cachedBrackets=s,b=s.split(" "),r=b.map(function(e){return e.replace(/(?=.)/g,"\\")})),x instanceof RegExp?s===orig?x:new RegExp(x.source.replace(re,function(b){return r[~~("}"===b)]}),x.global?"g":""):b[x]}}("{ }"),tmpl=function(){function tmpl(s,p){return s=(s||brackets(0)+brackets(1)).replace(brackets(/\\{/g),"￰").replace(brackets(/\\}/g),"￱"),p=split(s,extract(s,brackets(/{/),brackets(/}/))),new Function("d","return "+(p[0]||p[2]||p[3]?"["+p.map(function(s,i){return i%2?expr(s,!0):'"'+s.replace(/\n/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':expr(p[1])).replace(/\uFFF0/g,brackets(0)).replace(/\uFFF1/g,brackets(1))+";")}function expr(s,n){return s=s.replace(/\n/g," ").replace(brackets(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),""),/^\s*[\w- "']+ *:/.test(s)?"["+extract(s,/["' ]*[\w- ]+["' ]*:/,/,(?=["' ]*[\w- ]+["' ]*:)|}|$/).map(function(pair){return pair.replace(/^[ "']*(.+?)[ "']*: *(.+?),? *$/,function(_,k,v){return v.replace(/[^&|=!><]+/g,wrap)+'?"'+k+'":"",'})}).join("")+'].join(" ").trim()':wrap(s,n)}function wrap(s,nonull){return s=s.trim(),s?"(function(v){try{v="+(s.replace(reVars,function(s,_,v){return v?"(d."+v+"===undefined?"+("undefined"==typeof window?"global.":"window.")+v+":d."+v+")":s})||"x")+"}catch(e){}finally{return "+(nonull===!0?'!v&&v!==0?"":v':"v")+"}}).call(d)":""}function split(str,substrings){var parts=[];return substrings.map(function(sub,i){i=str.indexOf(sub),parts.push(str.slice(0,i),sub),str=str.slice(i+sub.length)}),parts.concat(str)}function extract(str,open,close){var start,level=0,matches=[],re=new RegExp("("+open.source+")|("+close.source+")","g");return str.replace(re,function(_,open,close,pos){!level&&open&&(start=pos),level+=open?1:-1,level||null==close||matches.push(str.slice(start,pos+close.length))}),matches}var cache={},reVars=/(['"\/]).*?[^\\]\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function *\()|([a-z_$]\w*)/gi;return function(str,data){return str&&(cache[str]=cache[str]||tmpl(str))(data)}}(),virtualDom=[],tagImpl={},RIOT_TAG="riot-tag";riot.tag=function(name,html,css,attrs,fn){return isFunction(attrs)&&(fn=attrs,/^[\w\-]+\s?=/.test(css)?(attrs=css,css=""):attrs=""),css&&(isFunction(css)?fn=css:injectStyle(css)),tagImpl[name]={name:name,tmpl:html,attrs:attrs,fn:fn},name},riot.mount=function(selector,tagName,opts){function addRiotTags(arr){var list="";return each(arr,function(e){list+=', *[riot-tag="'+e.trim()+'"]'}),list}function selectAllTags(){var keys=Object.keys(tagImpl);return keys+addRiotTags(keys)}function pushTags(root){if(root.tagName){tagName&&!root.getAttribute(RIOT_TAG)&&root.setAttribute(RIOT_TAG,tagName);var tag=mountTo(root,tagName||root.getAttribute(RIOT_TAG)||root.tagName.toLowerCase(),opts);tag&&tags.push(tag)}else root.length&&each(root,pushTags)}var els,allTags,tags=[];if(typeof tagName===T_OBJECT&&(opts=tagName,tagName=0),typeof selector===T_STRING?("*"===selector?selector=allTags=selectAllTags():selector+=addRiotTags(selector.split(",")),els=$$(selector)):els=selector,"*"===tagName){if(tagName=allTags||selectAllTags(),els.tagName)els=$$(tagName,els);else{var nodeList=[];each(els,function(_el){nodeList.push($$(tagName,_el))}),els=nodeList}tagName=0}return els.tagName?pushTags(els):each(els,pushTags),tags},riot.update=function(){return each(virtualDom,function(tag){tag.update()})},riot.mountTo=riot.mount,riot.util={brackets:brackets,tmpl:tmpl},"object"==typeof exports?module.exports=riot:"function"==typeof define&&define.amd?define(function(){return window.riot=riot}):window.riot=riot}("undefined"!=typeof window?window:void 0);